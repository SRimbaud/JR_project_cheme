\hypertarget{read_8h}{}\section{Référence du fichier include/read.h}
\label{read_8h}\index{include/read.\+h@{include/read.\+h}}


Read routine for S\+FS.  


{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$ctype.\+h$>$}\\*
{\ttfamily \#include \char`\"{}eval.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}number.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}object.\+h\char`\"{}}\\*
Graphe des dépendances par inclusion de read.\+h\+:
% FIG 0
Ce graphe montre quels fichiers incluent directement ou indirectement ce fichier \+:
% FIG 1
\subsection*{Définitions de type}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structobject__t}{object\+\_\+t} $\ast$ {\bfseries object}\hypertarget{read_8h_af581f8cc2bba3b54da9fd9d7225cb1f2}{}\label{read_8h_af581f8cc2bba3b54da9fd9d7225cb1f2}

\end{DoxyCompactItemize}
\subsection*{Énumérations}
\begin{DoxyCompactItemize}
\item 
enum \{ {\bfseries S\+\_\+\+OK}, 
{\bfseries S\+\_\+\+KO}, 
{\bfseries S\+\_\+\+E\+ND}
 \}\hypertarget{read_8h_a99fb83031ce9923c84392b4e92f956b5}{}\label{read_8h_a99fb83031ce9923c84392b4e92f956b5}

\end{DoxyCompactItemize}
\subsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
uint {\bfseries sfs\+\_\+get\+\_\+sexpr} (string input, F\+I\+LE $\ast$fp)\hypertarget{read_8h_a5adb5752d0f4e59e3b98009ffaedbca7}{}\label{read_8h_a5adb5752d0f4e59e3b98009ffaedbca7}

\item 
\hyperlink{structobject__t}{object} \hyperlink{read_8h_a5eb9a4ca33faccde4ffe139eff1909e4}{sfs\+\_\+read} (char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Lit une expression entrée par l\textquotesingle{}utilisateur et construit l\textquotesingle{}objet correspondant. \end{DoxyCompactList}\item 
\hyperlink{structobject__t}{object} \hyperlink{read_8h_a51259b1aabe7b4b7dcd75de6c37d3e89}{sfs\+\_\+read\+\_\+atom} (char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Lit une entrée utilisateur et construit l\textquotesingle{}objet correspondant. \end{DoxyCompactList}\item 
\hyperlink{structobject__t}{object} \hyperlink{read_8h_a10017da718aee17dce5ec698dab10751}{sfs\+\_\+read\+\_\+pair} (char $\ast$stream, uint $\ast$i)
\begin{DoxyCompactList}\small\item\em Construit une liste à partir d\textquotesingle{}une entrée utilisateur. Récursif. \end{DoxyCompactList}\item 
int \hyperlink{read_8h_ab21f6839688301ccb9e157c5f16c58b3}{sfs\+\_\+type\+\_\+atom} (char $\ast$chaine, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em détermine le type d\textquotesingle{}un atome et le renvoie. N\textquotesingle{}incrémente pas here. \end{DoxyCompactList}\item 
int \hyperlink{read_8h_a9cc1a614faace621e97aa57ac764ec93}{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait un entier de l\textquotesingle{}entrée utilisateur et créé l\textquotesingle{}objet correspondant. \end{DoxyCompactList}\item 
int \hyperlink{read_8h_aedd5c9ba9c7b85317ca31157893a9378}{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait le caractère de input et l\textquotesingle{}enregistre dans object. Place here sur caractère suivant. \end{DoxyCompactList}\item 
int \hyperlink{read_8h_ac9ebedee6be777ef6b05c9b3a651aeee}{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait la chaine de input et l\textquotesingle{}enregistre dans object. \end{DoxyCompactList}\item 
int \hyperlink{read_8h_accf6611c03303ef483521bd3b347b045}{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait le booléen de l\textquotesingle{}input. Déplace here au caractère suivant. \end{DoxyCompactList}\item 
int \hyperlink{read_8h_a46c4c9ac5d3fa743f8b60a812c7620f7}{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait un symbole de la chaine input et met à jour l\textquotesingle{}object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structobject__t}{object} \hyperlink{read_8h_a66e8aad941d446bb2fd11968edcfe8f0}{nil}\hypertarget{read_8h_a66e8aad941d446bb2fd11968edcfe8f0}{}\label{read_8h_a66e8aad941d446bb2fd11968edcfe8f0}

\begin{DoxyCompactList}\small\item\em Représente la fin d\textquotesingle{}une liste ou la liste vide. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Description détaillée}
Read routine for S\+FS. 

\begin{DoxyAuthor}{Auteur}
François Cayre $<$cayre.(null)$>$ 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
Fri Jun 15 18\+:30\+:11 2012 Read routine for S\+FS. 
\end{DoxyDate}


\subsection{Documentation des fonctions}
\index{read.\+h@{read.\+h}!O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_boolean_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_accf6611c03303ef483521bd3b347b045}{}\label{read_8h_accf6611c03303ef483521bd3b347b045}


Extrait le booléen de l\textquotesingle{}input. Déplace here au caractère suivant. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}objet dans lequel on enregistre. \\
\hline
{\em input} & \+: la chaine contenant le booléen. \\
\hline
{\em here} & \+: Le curseur sur le premier caractère utile de input.\\
\hline
\end{DoxyParams}
La fonction vérifie que le booléen entré en est bien un (\#t ou \#f) autrement elle le considère comme mal entré. Dans ce cas elle appelle W\+A\+R\+N\+I\+N\+G\+\_\+\+M\+SG et retourne 1. Elle place ensuite o à vrai ou à faux qui sont des variables globales de \hyperlink{repl_8c}{repl.\+c} (pas implémenté de cette façon encore).

\begin{DoxyReturn}{Renvoie}
Renvoie 0 si tout de passe bien, 1 sinon. 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_character_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_aedd5c9ba9c7b85317ca31157893a9378}{}\label{read_8h_aedd5c9ba9c7b85317ca31157893a9378}


Extrait le caractère de input et l\textquotesingle{}enregistre dans object. Place here sur caractère suivant. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}objet dans lequel on enregistre. \\
\hline
{\em input} & \+: la chaine contenant le caractère. \\
\hline
{\em here} & \+: Le curseur sur la chaine contenant le caractère\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
Renvoie 0 si tout de passe bien 1 sinon. 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_int_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_a9cc1a614faace621e97aa57ac764ec93}{}\label{read_8h_a9cc1a614faace621e97aa57ac764ec93}


Extrait un entier de l\textquotesingle{}entrée utilisateur et créé l\textquotesingle{}objet correspondant. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: L\textquotesingle{}object dans lequel mettre l\textquotesingle{}entier. \\
\hline
{\em input} & \+: Entrée de l\textquotesingle{}utilisateur. \\
\hline
{\em here} & \+: Curseur sur la chaine de l\textquotesingle{}utilisateur.\\
\hline
\end{DoxyParams}
On a contrôle de l\textquotesingle{}erreur ici. Si l\textquotesingle{}entier contient des caractères qui ne sont pas des parenthèses ouvrantes ou fermantes de listes celui-\/ci est considéré comme mauvais. Le type de l\textquotesingle{}object est alors mis à S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN et la fonction s\textquotesingle{}arrête en retournant 1. L\textquotesingle{}entier est alors tronqué.~\newline
La fonction gère aussi l\textquotesingle{}overflow, si l\textquotesingle{}entier est trop grand (ou trop petit négatif) le type est mis à S\+F\+S\+\_\+\+N\+U\+M\+B\+ER et la valeur à + ou -\/inf.(voir N\+U\+M\+\_\+set\+\_\+lint ) Dans ce cas affiche un W\+A\+R\+N\+I\+NG et retourne 2.~\newline
 Voir \href{http://manpagesfr.free.fr/man/man3/strtol.3.html }{\tt strtol } pour plus d\textquotesingle{}informations.

\begin{DoxyReturn}{Renvoie}
Renvoie 0, 1 si l\textquotesingle{}entier entré n\textquotesingle{}en est pas un, 2 si overflow. 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_string_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_ac9ebedee6be777ef6b05c9b3a651aeee}{}\label{read_8h_ac9ebedee6be777ef6b05c9b3a651aeee}


Extrait la chaine de input et l\textquotesingle{}enregistre dans object. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}objet dans lequel on enregistre. \\
\hline
{\em input} & \+: la chaine contenant la chaine. \\
\hline
{\em here} & \+: Le curseur sur le premier caractère utile de input.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
Renvoie 0 si tout de passe bien 1 sinon. 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_symbol_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_a46c4c9ac5d3fa743f8b60a812c7620f7}{}\label{read_8h_a46c4c9ac5d3fa743f8b60a812c7620f7}


Extrait un symbole de la chaine input et met à jour l\textquotesingle{}object. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}object de type symbole à éditer \\
\hline
{\em input} & \+: La chaine entrée par l\textquotesingle{}utilisateur. \\
\hline
{\em here} & le curseur sur la chaine.\\
\hline
\end{DoxyParams}
Cette fonction vérifie que chaque caractère du symbole est bien un supporté par scheme selon la R5\+RS voir isealum pour plus de détails. Dans le cas d\textquotesingle{}une erreur passe le type à S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN . Dans ce cas elle renvoie 1. \begin{DoxyReturn}{Renvoie}
\+: Renvoie O si Aucun problème n\textquotesingle{}est détecté, 1 sinon. 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!sfs\+\_\+read@{sfs\+\_\+read}}
\index{sfs\+\_\+read@{sfs\+\_\+read}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{sfs\+\_\+read(char $\ast$input, uint $\ast$here)}{sfs_read(char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf object} sfs\+\_\+read (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_a5eb9a4ca33faccde4ffe139eff1909e4}{}\label{read_8h_a5eb9a4ca33faccde4ffe139eff1909e4}


Lit une expression entrée par l\textquotesingle{}utilisateur et construit l\textquotesingle{}objet correspondant. 


\begin{DoxyParams}{Paramètres}
{\em input} & \+: Entrée utilisateur \\
\hline
{\em here} & \+: Curseur sur le lieu ou l\textquotesingle{}on se situe dans input.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
Renvoie l\textquotesingle{}object correspondant à l\textquotesingle{}input 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!sfs\+\_\+read\+\_\+atom@{sfs\+\_\+read\+\_\+atom}}
\index{sfs\+\_\+read\+\_\+atom@{sfs\+\_\+read\+\_\+atom}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{sfs\+\_\+read\+\_\+atom(char $\ast$input, uint $\ast$here)}{sfs_read_atom(char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}sfs\+\_\+read\+\_\+atom (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_a51259b1aabe7b4b7dcd75de6c37d3e89}{}\label{read_8h_a51259b1aabe7b4b7dcd75de6c37d3e89}


Lit une entrée utilisateur et construit l\textquotesingle{}objet correspondant. 


\begin{DoxyParams}{Paramètres}
{\em input} & \+: Entrée \\
\hline
{\em here} & \+: curseur sur l\textquotesingle{}entrée.\\
\hline
\end{DoxyParams}
L\textquotesingle{}objet renvoyé possède le type S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN si l\textquotesingle{}entrée utilisateur est mauvaise. Dans ce cas la fonction affiche un warning spécifiant que le type n\textquotesingle{}est pas reconnu. Elle renvoie alors N\+U\+LL. Fait appel à sfs\+\_\+type\+\_\+atom pour identifier le type de l\textquotesingle{}entrée. Lorsque le type n\textquotesingle{}est pas reconnu elle renvoie également un warning sans interrompre le programme. Pour plus de détails sur les erreurs voir \+:
\begin{DoxyItemize}
\item \hyperlink{read_8c_a9cc1a614faace621e97aa57ac764ec93}{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_aedd5c9ba9c7b85317ca31157893a9378}{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_ac9ebedee6be777ef6b05c9b3a651aeee}{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_accf6611c03303ef483521bd3b347b045}{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_a46c4c9ac5d3fa743f8b60a812c7620f7}{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update(object o, char$\ast$ input, uint$\ast$here)}
\end{DoxyItemize}

Types reconnus \+:
\begin{DoxyItemize}
\item entier signés
\item caractères
\item booléens
\item symboles
\item listes (paires)
\item nil
\item chaine de caractère
\end{DoxyItemize}

\begin{DoxyReturn}{Renvoie}
Renvoie l\textquotesingle{}envoie construit. 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!sfs\+\_\+read\+\_\+pair@{sfs\+\_\+read\+\_\+pair}}
\index{sfs\+\_\+read\+\_\+pair@{sfs\+\_\+read\+\_\+pair}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{sfs\+\_\+read\+\_\+pair(char $\ast$stream, uint $\ast$i)}{sfs_read_pair(char *stream, uint *i)}}]{\setlength{\rightskip}{0pt plus 5cm}sfs\+\_\+read\+\_\+pair (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{stream, }
\item[{uint $\ast$}]{i}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_a10017da718aee17dce5ec698dab10751}{}\label{read_8h_a10017da718aee17dce5ec698dab10751}


Construit une liste à partir d\textquotesingle{}une entrée utilisateur. Récursif. 


\begin{DoxyParams}{Paramètres}
{\em stream} & \+: Entrée. \\
\hline
{\em i} & \+: Curseur sur l\textquotesingle{}entrée. Incrémente le curseur.\\
\hline
\end{DoxyParams}
Fonction récursive. Les conditions sont une parenthèse fermante ou une fin de chaine. Dans ce cas cette fonction retourne la variable globale nil.

\begin{DoxySeeAlso}{Voir également}
\hyperlink{repl_8c}{repl.\+c}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Renvoie}
\+: Renvoie un object qui correspond à la liste construite. 
\end{DoxyReturn}
\index{read.\+h@{read.\+h}!sfs\+\_\+type\+\_\+atom@{sfs\+\_\+type\+\_\+atom}}
\index{sfs\+\_\+type\+\_\+atom@{sfs\+\_\+type\+\_\+atom}!read.\+h@{read.\+h}}
\subsubsection[{\texorpdfstring{sfs\+\_\+type\+\_\+atom(char $\ast$chaine, uint $\ast$here)}{sfs_type_atom(char *chaine, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int sfs\+\_\+type\+\_\+atom (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{chaine, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8h_ab21f6839688301ccb9e157c5f16c58b3}{}\label{read_8h_ab21f6839688301ccb9e157c5f16c58b3}


détermine le type d\textquotesingle{}un atome et le renvoie. N\textquotesingle{}incrémente pas here. 


\begin{DoxyParams}{Paramètres}
{\em chaine} & \+: Chaine dans laquelle trouver le type de l\textquotesingle{}atome  here \+: curseur sur la chaine.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
\+: Renvoie le type de l\textquotesingle{}atome. Retourne S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN aucun type ne correspond. 
\end{DoxyReturn}
