\hypertarget{read_8c}{}\section{Référence du fichier src/read.c}
\label{read_8c}\index{src/read.\+c@{src/read.\+c}}


Read routine for S\+FS.  


{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$ctype.\+h$>$}\\*
{\ttfamily \#include \char`\"{}read.\+h\char`\"{}}\\*
Graphe des dépendances par inclusion de read.\+c\+:
% FIG 0
\subsection*{Énumérations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{read_8c_a794da11e5e95baea1892357a25b44336}{E\+X\+P\+R\+E\+S\+S\+I\+O\+N\+\_\+\+T\+Y\+P\+E\+\_\+T} \{ \\*
\hyperlink{read_8c_a794da11e5e95baea1892357a25b44336acfe24a7b308a82835c8a9a9a89bc4ca2}{N\+O\+T\+H\+I\+NG}, 
\hyperlink{read_8c_a794da11e5e95baea1892357a25b44336a3789e89d60fe0d18548ebc6d3080e20f}{S\+T\+R\+I\+N\+G\+\_\+\+A\+T\+O\+ME}, 
\hyperlink{read_8c_a794da11e5e95baea1892357a25b44336a26a9892b61e0aa5a24c1c1c7d57ebaab}{B\+A\+S\+I\+C\+\_\+\+A\+T\+O\+ME}, 
\hyperlink{read_8c_a794da11e5e95baea1892357a25b44336a52eaf1b8684255efd41eadf2e613cf28}{S\+\_\+\+E\+X\+P\+R\+\_\+\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS}, 
\\*
\hyperlink{read_8c_a794da11e5e95baea1892357a25b44336adbd1812bee789fbf3548cf79d3f2b400}{F\+I\+N\+I\+S\+H\+ED}
 \}
\end{DoxyCompactItemize}
\subsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{read_8c_a2944755a32d2f89b5585df862eaa4980}{flip} (uint $\ast$i)
\begin{DoxyCompactList}\small\item\em Prend la négation de i. Equivalent à une porte non. \end{DoxyCompactList}\item 
char $\ast$ \hyperlink{read_8c_a5f436bcd6cba7ebae92b4278d43cf7d9}{first\+\_\+usefull\+\_\+char} (char $\ast$line)\hypertarget{read_8c_a5f436bcd6cba7ebae92b4278d43cf7d9}{}\label{read_8c_a5f436bcd6cba7ebae92b4278d43cf7d9}

\begin{DoxyCompactList}\small\item\em retourne un pointeur sur le premier caractere utile dans line ou N\+U\+LL si line ne contient que des espaces et des commentaires \end{DoxyCompactList}\item 
uint \hyperlink{read_8c_a46cec1fd91fe64ce3df1940755ea173e}{sfs\+\_\+get\+\_\+sexpr} (char $\ast$input, F\+I\+LE $\ast$fp)
\begin{DoxyCompactList}\small\item\em extrait la prochaine S-\/\+Expression dans le flux fp et la stocke dans input (meme si elle est repartie sur plusieurs lignes) \end{DoxyCompactList}\item 
\hyperlink{structobject__t}{object} \hyperlink{read_8c_a5eb9a4ca33faccde4ffe139eff1909e4}{sfs\+\_\+read} (char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Lit une expression entrée par l\textquotesingle{}utilisateur et construit l\textquotesingle{}objet correspondant. \end{DoxyCompactList}\item 
\hyperlink{structobject__t}{object} \hyperlink{read_8c_a6c3a38292d0be403baa7cc3cc2747849}{sfs\+\_\+read\+\_\+atom} (char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Lit une entrée utilisateur et construit l\textquotesingle{}objet correspondant. \end{DoxyCompactList}\item 
\hyperlink{structobject__t}{object} \hyperlink{read_8c_a8829af52b575d435c2919af838e459bc}{sfs\+\_\+read\+\_\+pair} (char $\ast$stream, uint $\ast$i)
\begin{DoxyCompactList}\small\item\em Construit une liste à partir d\textquotesingle{}une entrée utilisateur. Récursif. \end{DoxyCompactList}\item 
int \hyperlink{read_8c_ab21f6839688301ccb9e157c5f16c58b3}{sfs\+\_\+type\+\_\+atom} (char $\ast$chaine, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em détermine le type d\textquotesingle{}un atome et le renvoie. N\textquotesingle{}incrémente pas here. \end{DoxyCompactList}\item 
int \hyperlink{read_8c_a9cc1a614faace621e97aa57ac764ec93}{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait un entier de l\textquotesingle{}entrée utilisateur et créé l\textquotesingle{}objet correspondant. \end{DoxyCompactList}\item 
int \hyperlink{read_8c_aedd5c9ba9c7b85317ca31157893a9378}{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait le caractère de input et l\textquotesingle{}enregistre dans object. Place here sur caractère suivant. \end{DoxyCompactList}\item 
int \hyperlink{read_8c_ac9ebedee6be777ef6b05c9b3a651aeee}{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait la chaine de input et l\textquotesingle{}enregistre dans object. \end{DoxyCompactList}\item 
int \hyperlink{read_8c_accf6611c03303ef483521bd3b347b045}{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait le booléen de l\textquotesingle{}input. Déplace here au caractère suivant. \end{DoxyCompactList}\item 
int \hyperlink{read_8c_a46c4c9ac5d3fa743f8b60a812c7620f7}{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update} (\hyperlink{structobject__t}{object} o, char $\ast$input, uint $\ast$here)
\begin{DoxyCompactList}\small\item\em Extrait un symbole de la chaine input et met à jour l\textquotesingle{}object. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Description détaillée}
Read routine for S\+FS. 

\begin{DoxyAuthor}{Auteur}
François Cayre $<$cayre.(null)$>$ 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
Fri Jun 15 18\+:31\+:05 2012 Read routine for S\+FS. 
\end{DoxyDate}


\subsection{Documentation du type de l\textquotesingle{}énumération}
\index{read.\+c@{read.\+c}!E\+X\+P\+R\+E\+S\+S\+I\+O\+N\+\_\+\+T\+Y\+P\+E\+\_\+T@{E\+X\+P\+R\+E\+S\+S\+I\+O\+N\+\_\+\+T\+Y\+P\+E\+\_\+T}}
\index{E\+X\+P\+R\+E\+S\+S\+I\+O\+N\+\_\+\+T\+Y\+P\+E\+\_\+T@{E\+X\+P\+R\+E\+S\+S\+I\+O\+N\+\_\+\+T\+Y\+P\+E\+\_\+T}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{E\+X\+P\+R\+E\+S\+S\+I\+O\+N\+\_\+\+T\+Y\+P\+E\+\_\+T}{EXPRESSION_TYPE_T}}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf E\+X\+P\+R\+E\+S\+S\+I\+O\+N\+\_\+\+T\+Y\+P\+E\+\_\+T}}\hypertarget{read_8c_a794da11e5e95baea1892357a25b44336}{}\label{read_8c_a794da11e5e95baea1892357a25b44336}
\begin{Desc}
\item[Valeurs énumérées]\par
\begin{description}
\index{N\+O\+T\+H\+I\+NG@{N\+O\+T\+H\+I\+NG}!read.\+c@{read.\+c}}\index{read.\+c@{read.\+c}!N\+O\+T\+H\+I\+NG@{N\+O\+T\+H\+I\+NG}}\item[{\em 
N\+O\+T\+H\+I\+NG\hypertarget{read_8c_a794da11e5e95baea1892357a25b44336acfe24a7b308a82835c8a9a9a89bc4ca2}{}\label{read_8c_a794da11e5e95baea1892357a25b44336acfe24a7b308a82835c8a9a9a89bc4ca2}
}]rien n\textquotesingle{}a ete trouve encore.. \index{S\+T\+R\+I\+N\+G\+\_\+\+A\+T\+O\+ME@{S\+T\+R\+I\+N\+G\+\_\+\+A\+T\+O\+ME}!read.\+c@{read.\+c}}\index{read.\+c@{read.\+c}!S\+T\+R\+I\+N\+G\+\_\+\+A\+T\+O\+ME@{S\+T\+R\+I\+N\+G\+\_\+\+A\+T\+O\+ME}}\item[{\em 
S\+T\+R\+I\+N\+G\+\_\+\+A\+T\+O\+ME\hypertarget{read_8c_a794da11e5e95baea1892357a25b44336a3789e89d60fe0d18548ebc6d3080e20f}{}\label{read_8c_a794da11e5e95baea1892357a25b44336a3789e89d60fe0d18548ebc6d3080e20f}
}]la premiere trouvee dans la ligne semble etre un atome \index{B\+A\+S\+I\+C\+\_\+\+A\+T\+O\+ME@{B\+A\+S\+I\+C\+\_\+\+A\+T\+O\+ME}!read.\+c@{read.\+c}}\index{read.\+c@{read.\+c}!B\+A\+S\+I\+C\+\_\+\+A\+T\+O\+ME@{B\+A\+S\+I\+C\+\_\+\+A\+T\+O\+ME}}\item[{\em 
B\+A\+S\+I\+C\+\_\+\+A\+T\+O\+ME\hypertarget{read_8c_a794da11e5e95baea1892357a25b44336a26a9892b61e0aa5a24c1c1c7d57ebaab}{}\label{read_8c_a794da11e5e95baea1892357a25b44336a26a9892b61e0aa5a24c1c1c7d57ebaab}
}]la premiere trouvee dans la ligne semble etre d\textquotesingle{}une chaine \index{S\+\_\+\+E\+X\+P\+R\+\_\+\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS@{S\+\_\+\+E\+X\+P\+R\+\_\+\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS}!read.\+c@{read.\+c}}\index{read.\+c@{read.\+c}!S\+\_\+\+E\+X\+P\+R\+\_\+\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS@{S\+\_\+\+E\+X\+P\+R\+\_\+\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS}}\item[{\em 
S\+\_\+\+E\+X\+P\+R\+\_\+\+P\+A\+R\+E\+N\+T\+H\+E\+S\+IS\hypertarget{read_8c_a794da11e5e95baea1892357a25b44336a52eaf1b8684255efd41eadf2e613cf28}{}\label{read_8c_a794da11e5e95baea1892357a25b44336a52eaf1b8684255efd41eadf2e613cf28}
}]la premiere trouvee dans la ligne semble etre une expression parenthesee \index{F\+I\+N\+I\+S\+H\+ED@{F\+I\+N\+I\+S\+H\+ED}!read.\+c@{read.\+c}}\index{read.\+c@{read.\+c}!F\+I\+N\+I\+S\+H\+ED@{F\+I\+N\+I\+S\+H\+ED}}\item[{\em 
F\+I\+N\+I\+S\+H\+ED\hypertarget{read_8c_a794da11e5e95baea1892357a25b44336adbd1812bee789fbf3548cf79d3f2b400}{}\label{read_8c_a794da11e5e95baea1892357a25b44336adbd1812bee789fbf3548cf79d3f2b400}
}]on a trouve une S-\/\+Expr bien formee \end{description}
\end{Desc}


\subsection{Documentation des fonctions}
\index{read.\+c@{read.\+c}!flip@{flip}}
\index{flip@{flip}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{flip(uint $\ast$i)}{flip(uint *i)}}]{\setlength{\rightskip}{0pt plus 5cm}void flip (
\begin{DoxyParamCaption}
\item[{uint $\ast$}]{i}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_a2944755a32d2f89b5585df862eaa4980}{}\label{read_8c_a2944755a32d2f89b5585df862eaa4980}


Prend la négation de i. Equivalent à une porte non. 

\begin{DoxyReturn}{Renvoie}
Retourne !i. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_boolean_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_accf6611c03303ef483521bd3b347b045}{}\label{read_8c_accf6611c03303ef483521bd3b347b045}


Extrait le booléen de l\textquotesingle{}input. Déplace here au caractère suivant. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}objet dans lequel on enregistre. \\
\hline
{\em input} & \+: la chaine contenant le booléen. \\
\hline
{\em here} & \+: Le curseur sur le premier caractère utile de input.\\
\hline
\end{DoxyParams}
La fonction vérifie que le booléen entré en est bien un (\#t ou \#f) autrement elle le considère comme mal entré. Dans ce cas elle appelle W\+A\+R\+N\+I\+N\+G\+\_\+\+M\+SG et retourne 1. Elle place ensuite o à vrai ou à faux qui sont des variables globales de \hyperlink{repl_8c}{repl.\+c} (pas implémenté de cette façon encore).

\begin{DoxyReturn}{Renvoie}
Renvoie 0 si tout de passe bien, 1 sinon. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_character_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_aedd5c9ba9c7b85317ca31157893a9378}{}\label{read_8c_aedd5c9ba9c7b85317ca31157893a9378}


Extrait le caractère de input et l\textquotesingle{}enregistre dans object. Place here sur caractère suivant. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}objet dans lequel on enregistre. \\
\hline
{\em input} & \+: la chaine contenant le caractère. \\
\hline
{\em here} & \+: Le curseur sur la chaine contenant le caractère\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
Renvoie 0 si tout de passe bien 1 sinon. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_int_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_a9cc1a614faace621e97aa57ac764ec93}{}\label{read_8c_a9cc1a614faace621e97aa57ac764ec93}


Extrait un entier de l\textquotesingle{}entrée utilisateur et créé l\textquotesingle{}objet correspondant. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: L\textquotesingle{}object dans lequel mettre l\textquotesingle{}entier. \\
\hline
{\em input} & \+: Entrée de l\textquotesingle{}utilisateur. \\
\hline
{\em here} & \+: Curseur sur la chaine de l\textquotesingle{}utilisateur.\\
\hline
\end{DoxyParams}
On a contrôle de l\textquotesingle{}erreur ici. Si l\textquotesingle{}entier contient des caractères qui ne sont pas des parenthèses ouvrantes ou fermantes de listes celui-\/ci est considéré comme mauvais. Le type de l\textquotesingle{}object est alors mis à S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN et la fonction s\textquotesingle{}arrête en retournant 1. L\textquotesingle{}entier est alors tronqué.~\newline
La fonction gère aussi l\textquotesingle{}overflow, si l\textquotesingle{}entier est trop grand (ou trop petit négatif) le type est mis à S\+F\+S\+\_\+\+N\+U\+M\+B\+ER et la valeur à + ou -\/inf.(voir N\+U\+M\+\_\+set\+\_\+lint ) Dans ce cas affiche un W\+A\+R\+N\+I\+NG et retourne 2.~\newline
 Voir \href{http://manpagesfr.free.fr/man/man3/strtol.3.html }{\tt strtol } pour plus d\textquotesingle{}informations.

\begin{DoxyReturn}{Renvoie}
Renvoie 0, 1 si l\textquotesingle{}entier entré n\textquotesingle{}en est pas un, 2 si overflow. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_string_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_ac9ebedee6be777ef6b05c9b3a651aeee}{}\label{read_8c_ac9ebedee6be777ef6b05c9b3a651aeee}


Extrait la chaine de input et l\textquotesingle{}enregistre dans object. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}objet dans lequel on enregistre. \\
\hline
{\em input} & \+: la chaine contenant la chaine. \\
\hline
{\em here} & \+: Le curseur sur le premier caractère utile de input.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
Renvoie 0 si tout de passe bien 1 sinon. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update}}
\index{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update@{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update(object o, char $\ast$input, uint $\ast$here)}{OBJECT_symbol_update(object o, char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update (
\begin{DoxyParamCaption}
\item[{{\bf object}}]{o, }
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_a46c4c9ac5d3fa743f8b60a812c7620f7}{}\label{read_8c_a46c4c9ac5d3fa743f8b60a812c7620f7}


Extrait un symbole de la chaine input et met à jour l\textquotesingle{}object. 


\begin{DoxyParams}{Paramètres}
{\em o} & \+: l\textquotesingle{}object de type symbole à éditer \\
\hline
{\em input} & \+: La chaine entrée par l\textquotesingle{}utilisateur. \\
\hline
{\em here} & le curseur sur la chaine.\\
\hline
\end{DoxyParams}
Cette fonction vérifie que chaque caractère du symbole est bien un supporté par scheme selon la R5\+RS voir isealum pour plus de détails. Dans le cas d\textquotesingle{}une erreur passe le type à S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN . Dans ce cas elle renvoie 1. \begin{DoxyReturn}{Renvoie}
\+: Renvoie O si Aucun problème n\textquotesingle{}est détecté, 1 sinon. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!sfs\+\_\+get\+\_\+sexpr@{sfs\+\_\+get\+\_\+sexpr}}
\index{sfs\+\_\+get\+\_\+sexpr@{sfs\+\_\+get\+\_\+sexpr}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{sfs\+\_\+get\+\_\+sexpr(char $\ast$input, F\+I\+L\+E $\ast$fp)}{sfs_get_sexpr(char *input, FILE *fp)}}]{\setlength{\rightskip}{0pt plus 5cm}uint sfs\+\_\+get\+\_\+sexpr (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{input, }
\item[{F\+I\+LE $\ast$}]{fp}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_a46cec1fd91fe64ce3df1940755ea173e}{}\label{read_8c_a46cec1fd91fe64ce3df1940755ea173e}


extrait la prochaine S-\/\+Expression dans le flux fp et la stocke dans input (meme si elle est repartie sur plusieurs lignes) 


\begin{DoxyParams}{Paramètres}
{\em fp} & (F\+I\+LE $\ast$) flux d\textquotesingle{}entree (ouvert en ecriture, mode texte) \\
\hline
{\em input} & (char $\ast$) chaine allouee de taille B\+I\+G\+S\+T\+R\+I\+NG, dans laquelle la S-\/\+Expression sera stockée\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
S\+\_\+\+OK si une S-\/\+Expression apparemment valide a ete trouvee 

S\+\_\+\+KO si on n\textquotesingle{}a pas trouve de S-\/\+Expression valide 

S\+\_\+\+E\+ND si fin de fichier atteinte sans avoir lu de caractere utile.
\end{DoxyReturn}
sfs\+\_\+get\+\_\+sexpr commence par lire une ligne dans fp, puis compte le nombre de parentheses ouvrantes et fermantes sur la ligne. Les parentheses dans des chaines et les caracteres Scheme \#( et \#) ne sont pas comptes.

Si le compte devient zéro et que
\begin{DoxyItemize}
\item la ligne est fini, la fonction retourne S\+\_\+\+OK
\begin{DoxyItemize}
\item la ligne n\textquotesingle{}est pas fini la fonction retourne S\+\_\+\+KO
\end{DoxyItemize}
\end{DoxyItemize}

S\textquotesingle{}il y a plus de parentheses fermantes qu\textquotesingle{}ouvrantes, la fonction retourne S\+\_\+\+KO. Les commentaires et espaces qui figurent a la fin de chaque ligne sont remplacés par un espace. Les espaces qui figurent a la fin de la S-\/\+Expression (y compris \textquotesingle{}~\newline
\textquotesingle{}) sont supprimés.

Attention \+: cette fonction refuse les S-\/\+Expression multiple sur une seule ligne. Ainsi \+: a b c (qqchose) (autrechose) (qqchose) 78 seront considereees comme des erreurs et la fonction retournera S\+\_\+\+KO

\begin{DoxyPrecond}{Précondition}
fp doit etre prealablement ouvert en lecture 

input doit etre prealablement alloue en memoire, de taille B\+I\+G\+S\+T\+R\+I\+NG 
\end{DoxyPrecond}
\index{read.\+c@{read.\+c}!sfs\+\_\+read@{sfs\+\_\+read}}
\index{sfs\+\_\+read@{sfs\+\_\+read}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{sfs\+\_\+read(char $\ast$input, uint $\ast$here)}{sfs_read(char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf object} sfs\+\_\+read (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_a5eb9a4ca33faccde4ffe139eff1909e4}{}\label{read_8c_a5eb9a4ca33faccde4ffe139eff1909e4}


Lit une expression entrée par l\textquotesingle{}utilisateur et construit l\textquotesingle{}objet correspondant. 


\begin{DoxyParams}{Paramètres}
{\em input} & \+: Entrée utilisateur \\
\hline
{\em here} & \+: Curseur sur le lieu ou l\textquotesingle{}on se situe dans input.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
Renvoie l\textquotesingle{}object correspondant à l\textquotesingle{}input 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!sfs\+\_\+read\+\_\+atom@{sfs\+\_\+read\+\_\+atom}}
\index{sfs\+\_\+read\+\_\+atom@{sfs\+\_\+read\+\_\+atom}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{sfs\+\_\+read\+\_\+atom(char $\ast$input, uint $\ast$here)}{sfs_read_atom(char *input, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf object} sfs\+\_\+read\+\_\+atom (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{input, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_a6c3a38292d0be403baa7cc3cc2747849}{}\label{read_8c_a6c3a38292d0be403baa7cc3cc2747849}


Lit une entrée utilisateur et construit l\textquotesingle{}objet correspondant. 


\begin{DoxyParams}{Paramètres}
{\em input} & \+: Entrée \\
\hline
{\em here} & \+: curseur sur l\textquotesingle{}entrée.\\
\hline
\end{DoxyParams}
L\textquotesingle{}objet renvoyé possède le type S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN si l\textquotesingle{}entrée utilisateur est mauvaise. Dans ce cas la fonction affiche un warning spécifiant que le type n\textquotesingle{}est pas reconnu. Elle renvoie alors N\+U\+LL. Fait appel à sfs\+\_\+type\+\_\+atom pour identifier le type de l\textquotesingle{}entrée. Lorsque le type n\textquotesingle{}est pas reconnu elle renvoie également un warning sans interrompre le programme. Pour plus de détails sur les erreurs voir \+:
\begin{DoxyItemize}
\item \hyperlink{read_8c_a9cc1a614faace621e97aa57ac764ec93}{O\+B\+J\+E\+C\+T\+\_\+int\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_aedd5c9ba9c7b85317ca31157893a9378}{O\+B\+J\+E\+C\+T\+\_\+character\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_ac9ebedee6be777ef6b05c9b3a651aeee}{O\+B\+J\+E\+C\+T\+\_\+string\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_accf6611c03303ef483521bd3b347b045}{O\+B\+J\+E\+C\+T\+\_\+boolean\+\_\+update(object o, char$\ast$ input, uint$\ast$ here)}
\item \hyperlink{read_8c_a46c4c9ac5d3fa743f8b60a812c7620f7}{O\+B\+J\+E\+C\+T\+\_\+symbol\+\_\+update(object o, char$\ast$ input, uint$\ast$here)}
\end{DoxyItemize}

Types reconnus \+:
\begin{DoxyItemize}
\item entier signés
\item caractères
\item booléens
\item symboles
\item listes (paires)
\item nil
\item chaine de caractère
\end{DoxyItemize}

\begin{DoxyReturn}{Renvoie}
Renvoie l\textquotesingle{}envoie construit. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!sfs\+\_\+read\+\_\+pair@{sfs\+\_\+read\+\_\+pair}}
\index{sfs\+\_\+read\+\_\+pair@{sfs\+\_\+read\+\_\+pair}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{sfs\+\_\+read\+\_\+pair(char $\ast$stream, uint $\ast$i)}{sfs_read_pair(char *stream, uint *i)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf object} sfs\+\_\+read\+\_\+pair (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{stream, }
\item[{uint $\ast$}]{i}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_a8829af52b575d435c2919af838e459bc}{}\label{read_8c_a8829af52b575d435c2919af838e459bc}


Construit une liste à partir d\textquotesingle{}une entrée utilisateur. Récursif. 


\begin{DoxyParams}{Paramètres}
{\em stream} & \+: Entrée. \\
\hline
{\em i} & \+: Curseur sur l\textquotesingle{}entrée. Incrémente le curseur.\\
\hline
\end{DoxyParams}
Fonction récursive. Les conditions sont une parenthèse fermante ou une fin de chaine. Dans ce cas cette fonction retourne la variable globale nil.

\begin{DoxySeeAlso}{Voir également}
\hyperlink{repl_8c}{repl.\+c}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Renvoie}
\+: Renvoie un object qui correspond à la liste construite. 
\end{DoxyReturn}
\index{read.\+c@{read.\+c}!sfs\+\_\+type\+\_\+atom@{sfs\+\_\+type\+\_\+atom}}
\index{sfs\+\_\+type\+\_\+atom@{sfs\+\_\+type\+\_\+atom}!read.\+c@{read.\+c}}
\subsubsection[{\texorpdfstring{sfs\+\_\+type\+\_\+atom(char $\ast$chaine, uint $\ast$here)}{sfs_type_atom(char *chaine, uint *here)}}]{\setlength{\rightskip}{0pt plus 5cm}int sfs\+\_\+type\+\_\+atom (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{chaine, }
\item[{uint $\ast$}]{here}
\end{DoxyParamCaption}
)}\hypertarget{read_8c_ab21f6839688301ccb9e157c5f16c58b3}{}\label{read_8c_ab21f6839688301ccb9e157c5f16c58b3}


détermine le type d\textquotesingle{}un atome et le renvoie. N\textquotesingle{}incrémente pas here. 


\begin{DoxyParams}{Paramètres}
{\em chaine} & \+: Chaine dans laquelle trouver le type de l\textquotesingle{}atome  here \+: curseur sur la chaine.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
\+: Renvoie le type de l\textquotesingle{}atome. Retourne S\+F\+S\+\_\+\+U\+N\+K\+N\+O\+WN aucun type ne correspond. 
\end{DoxyReturn}
